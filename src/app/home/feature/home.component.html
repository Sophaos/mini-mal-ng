<ng-container *ngIf="vm$ | async as vm; else loading">
  <div class="col-12">
    <app-main-preview
      header="Top Airing Animes"
      [data]="vm.topAiringAnimes"
      [link]="['/season', currentYear, currentSeason]"
      [isLoading]="vm.topAiringAnimesLoading"
    />
  </div>
  <div class="flex flex-wrap">
    <app-items-container
      title="Latest Reviews"
      class="xl:col-6 lg:col-6 col-12"
      [isCollapsed]="false"
    >
      <div
        *ngIf="!vm.animeReviewsLoading; else loading"
        class="max-h-30rem overflow-x-hidden overflow-y-auto"
      >
        <div class="mb-2" *ngFor="let review of vm.reviews">
          <app-review-row [review]="review" />
        </div>
      </div>
    </app-items-container>
    <app-items-container
      title="Latest Recommendations"
      class="xl:col-6 lg:col-6 col-12"
      [isCollapsed]="false"
    >
      <div
        *ngIf="!vm.animeRecommendationsLoading; else loading"
        class="max-h-30rem overflow-auto"
      >
        <div class="mb-2" *ngFor="let recommendation of vm.recommendations">
          <app-recommendation-row [recommendation]="recommendation" />
        </div>
      </div>
    </app-items-container>
  </div>
</ng-container>

<ng-template #loading>
  <div class="flex-1">
    <app-skeleton-panel-header />
  </div>
</ng-template>
